{% extends 'base.html' %}
{% load static %}

{% block title %}User Dashboard - BuildKart{% endblock %}

{% block navbar %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Top Navigation Bar -->
    <header class="top-nav">
        <div class="nav-left">
            <a href="{% url 'product_list' %}" class="logo">
                <span class="logo-build">Build</span><span class="logo-kart">Kart</span>
            </a>
        </div>
        
        <div class="nav-center">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Search for products, brands and more" class="search-input">
            </div>
        </div>
        
        <div class="nav-right">
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>{{ user.username|default:'ajagare' }}</span>
                    <i class="fas fa-chevron-down"></i>
                </a>
            </div>
            <div class="nav-item">
                <a href="{% url 'my_orders' %}" class="nav-link">
                    <i class="fas fa-box"></i>
                    <span>Orders</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-heart"></i>
                    <span>Wishlist</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="{% url 'cart_detail' %}" class="nav-link cart-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cart</span>
                    {% if cart_items_count > 0 %}
                    <span class="cart-badge">{{ cart_items_count }}</span>
                    {% endif %}
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="profile-section">
                <div class="profile-image">
                    {% if user.userprofile.image %}
                        <img src="{{ user.userprofile.image.url }}" alt="{{ user.username }}">
                    {% else %}
                        <i class="fas fa-user"></i>
                    {% endif %}
                </div>
                <div class="profile-info">
                    <h3>{{ user.username|default:'ajagare' }}</h3>
                    <p>{{ user.email|default:'ajagare@example.com' }}</p>
                </div>
            </div>
            
            <nav class="sidebar-menu">
                <a href="{% url 'dashboard' %}" class="menu-item {% if request.path == '/dashboard/' %}active{% endif %}">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </a>
                <a href="{% url 'product_list' %}" class="menu-item {% if 'products' in request.path %}active{% endif %}">
                    <i class="fas fa-store"></i>
                    <span>Products</span>
                </a>
                <a href="{% url 'cart_detail' %}" class="menu-item {% if 'cart' in request.path %}active{% endif %}">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cart</span>
                </a>
                <a href="{% url 'my_orders' %}" class="menu-item {% if 'orders' in request.path %}active{% endif %}">
                    <i class="fas fa-box"></i>
                    <span>My Orders</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-heart"></i>
                    <span>Wishlist</span>
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Addresses</span>
                </a>
                <a href="{% url 'profile' %}" class="menu-item {% if 'profile' in request.path %}active{% endif %}">
                    <i class="fas fa-user-cog"></i>
                    <span>Edit Profile</span>
                </a>
                <a href="{% url 'logout' %}" class="menu-item logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- Dashboard Content -->
        <main class="content-area">
            <!-- Welcome Section -->
            <div class="welcome-banner">
                <div class="welcome-text">
                    <h1>Welcome back, {{ user.username|default:'ajagare' }}!</h1>
                    <p>Manage your account and track your orders</p>
                </div>
            </div>

            <!-- Quick Feature Cards - Column Layout with Flexbox -->
            <div class="feature-cards">
                <a href="{% url 'product_list' %}" class="feature-card">
                    <div class="card-icon">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Products</h3>
                        <p>Browse All</p>
                    </div>
                    <button class="feature-card-btn">View</button>
                </a>
                
                <a href="{% url 'cart_detail' %}" class="feature-card">
                    <div class="card-icon cart">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Cart</h3>
                        <p>View Cart</p>
                    </div>
                    <button class="feature-card-btn">View</button>
                </a>
                
                <a href="{% url 'my_orders' %}" class="feature-card">
                    <div class="card-icon orders">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Orders</h3>
                        <p>Track Orders</p>
                    </div>
                    <button class="feature-card-btn">View</button>
                </a>
                
                <a href="#" class="feature-card">
                    <div class="card-icon wishlist">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Wishlist</h3>
                        <p>Saved Items</p>
                    </div>
                    <button class="feature-card-btn">View</button>
                </a>
                
                <a href="#" class="feature-card">
                    <div class="card-icon address">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Addresses</h3>
                        <p>Manage</p>
                    </div>
                    <button class="feature-card-btn">View</button>
                </a>
                
                <a href="{% url 'profile' %}" class="feature-card">
                    <div class="card-icon profile">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <div class="feature-card-content">
                        <h3>Profile</h3>
                        <p>Edit Info</p>
                    </div>
                    <button class="feature-card-btn">Edit</button>
                </a>
            </div>

            <!-- Stats Section -->
            <div class="stats-section">
                <div class="stats-card">
                    <div class="stat-item">
                        <i class="fas fa-shopping-bag"></i>
                        <div class="stat-info">
                            <h4>{{ orders_count }}</h4>
                            <p>Total Orders</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-heart"></i>
                        <div class="stat-info">
                            <h4>{{ wishlist_count }}</h4>
                            <p>Wishlist Items</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div class="stat-info">
                            <h4>{{ addresses_count }}</h4>
                            <p>Saved Addresses</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-shopping-cart"></i>
                        <div class="stat-info">
                            <h4>{{ cart_items_count }}</h4>
                            <p>Cart Items</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Orders Section -->
            <div class="recent-section">
                <div class="section-header">
                    <h2><i class="fas fa-clock"></i> Recent Orders</h2>
                    <a href="{% url 'my_orders' %}" class="view-all">View All</a>
                </div>
                <div class="empty-state">
                    <i class="fas fa-shopping-bag"></i>
                    <h3>No orders yet</h3>
                    <p>Start shopping to see your orders here</p>
                    <a href="{% url 'product_list' %}" class="btn-primary">Browse Products</a>
                </div>
            </div>
        </main>
    </div>
</div>

{% block footer %}{% endblock %}
{% endblock %}
